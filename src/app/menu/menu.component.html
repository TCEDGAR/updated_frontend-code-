<div class="menu-background">
  <div class="app-container">
    <!-- Header Section -->
    <div class="menu-header">
      <h1 class="menu-title">
        üçΩÔ∏è {{ selectedCategory ? selectedCategory + ' Menu' : 'Our Delicious Menu' }}
      </h1>
      <p class="menu-subtitle">
        {{ selectedCategory ? 'Explore our ' + selectedCategory.toLowerCase() + ' selection' : 'Discover flavors that will make your taste buds dance' }}
      </p>
    </div>
    
    <!-- Search & Filters Section -->
    <div class="search-filter-section">
      <!-- Category Filter Chips -->
      <div class="category-filters" *ngIf="!selectedCategory">
        <button 
          mat-chip 
          class="category-chip"
          [class.selected]="!selectedCategory"
          (click)="clearCategoryFilter()"
        >
          All Items
        </button>
        <button 
          mat-chip 
          class="category-chip"
          *ngFor="let category of availableCategories"
          [class.selected]="selectedCategory === category"
          (click)="filterByCategory(category)"
        >
          {{ category }}
        </button>
      </div>
      
      <!-- Back to All Categories -->
      <div class="category-back" *ngIf="selectedCategory">
        <button 
          mat-stroked-button 
          (click)="clearCategoryFilter()"
          class="back-button"
        >
          <mat-icon>arrow_back</mat-icon>
          View All Categories
        </button>
      </div>
      
      <!-- Search and Favorites Bar -->
      <div class="search-filter-bar">
        <div class="search-box">
          <mat-icon class="search-icon">search</mat-icon>
          <input
            type="text"
            [(ngModel)]="searchTerm"
            placeholder="Search by name, category, description..."
            class="search-input"
          />
        </div>
        
        <button 
          mat-fab 
          [color]="showFavouritesOnly ? 'accent' : 'primary'"
          (click)="showFavouritesOnly = !showFavouritesOnly"
          class="favourite-toggle"
          [matTooltip]="showFavouritesOnly ? 'Show All Items' : 'Show Favourites Only'"
        >
          <mat-icon>{{ showFavouritesOnly ? 'favorite' : 'favorite_border' }}</mat-icon>
        </button>
      </div>
    </div>

    <!-- Menu Grid -->
    <div class="menu-grid" *ngIf="filteredMenu.length > 0">
      <div class="menu-item-card" *ngFor="let item of filteredMenu">
        <div class="item-image-container">
          <img 
            [src]="item.imageUrl || 'https://images.pexels.com/photos/70497/pexels-photo-70497.jpeg'" 
            [alt]="item.name"
            class="item-image"
          />
          <div class="image-overlay">
            <button 
              mat-mini-fab 
              color="accent"
              (click)="toggleFavourite(item)"
              class="favourite-btn"
            >
              <mat-icon>{{ favourites.has(item.id) ? 'favorite' : 'favorite_border' }}</mat-icon>
            </button>
          </div>
        </div>

        <div class="item-content">
          <div class="item-header">
            <h3 class="item-name">{{ item.name }}</h3>
            <div class="item-badges">
              <span class="badge" [ngClass]="item.veg ? 'veg-badge' : 'non-veg-badge'">
                {{ item.veg ? 'üü¢ Veg' : 'üî¥ Non-Veg' }}
              </span>
              <span class="badge category-badge">
                {{ item.categoryName }}
              </span>
            </div>
          </div>
          
          <p class="item-description">{{ item.description }}</p>
          
          <div class="item-footer">
            <div class="price-section">
              <span class="item-price">‚Çπ{{ item.price }}</span>
            </div>
            
            <button 
              mat-raised-button 
              class="add-to-cart-btn"
              (click)="addToCart(item)"
            >
              <mat-icon>add_shopping_cart</mat-icon>
              Add to Cart
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredMenu.length === 0">
      <div class="empty-icon">üîç</div>
      <h3>No items found</h3>
      <p>Try adjusting your search or filter criteria</p>
      <button mat-raised-button color="primary" (click)="clearFilters()">
        Clear Filters
      </button>
    </div>
  </div>
</div>